<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OutfitIQ - Reset Password</title>
  <style>
    :root {
  --bg-dark: #0b0b14;
  --bg-card: #141427;
  --purple: #7c7cff;
  --purple-dark: #5b5bd6;
  --text-light: #e5e7eb;
  --text-muted: #9ca3af;
  --border-dark: #2a2a40;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: radial-gradient(
    circle at top,
    #1b1b3a 0%,
    #0b0b14 60%
  );
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  margin: 0;
  color: var(--text-light);
}

/* Card */
.auth-container {
  background: linear-gradient(
    180deg,
    #16162c 0%,
    #101022 100%
  );
  padding: 32px;
  border-radius: 14px;
  width: 100%;
  max-width: 400px;
  text-align: center;

  border: 1px solid var(--border-dark);
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.6),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

/* Heading */
h2 {
  margin-bottom: 22px;
  color: var(--purple);
  font-weight: 600;
  letter-spacing: 0.4px;
}

/* Inputs */
input[type="text"],
input[type="password"],
select {
  width: 100%;
  padding: 11px 12px;
  margin: 10px 0;
  background-color: #0e0e1c;
  border: 1px solid var(--border-dark);
  border-radius: 8px;
  font-size: 0.95rem;
  color: var(--text-light);
  outline: none;
  transition: all 0.2s ease;
}

input::placeholder {
  color: var(--text-muted);
}

input:focus,
select:focus {
  border-color: var(--purple);
  box-shadow: 0 0 0 2px rgba(124, 124, 255, 0.2);
}

/* Checkbox row */
.auth-container div[style*="text-align"] {
  color: var(--text-muted);
  font-size: 0.85rem;
}

/* Button */
button {
  width: 100%;
  background: linear-gradient(
    135deg,
    var(--purple),
    var(--purple-dark)
  );
  color: white;
  padding: 11px;
  border: none;
  border-radius: 10px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  margin-top: 14px;
  transition: all 0.25s ease;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 20px rgba(124, 124, 255, 0.4);
}

/* Links */
.switch-link {
  margin-top: 16px;
  font-size: 0.85rem;
  color: var(--text-muted);
}

.switch-link a {
  color: var(--purple);
  cursor: pointer;
  text-decoration: none;
  font-weight: 500;
}

.switch-link a:hover {
  text-decoration: underline;
}

/* Utility */
.hidden {
  display: none;
}

  </style>
</head>
<body>
  <div class="auth-container">
    <h2>Reset Password</h2>
    <input type="text" id="reset-username" placeholder="Username">
    <input type="password" id="reset-new-password" placeholder="New Password">
    <input type="password" id="reset-confirm-password" placeholder="Confirm New Password">
    <div style="text-align: left;">
      <input type="checkbox" id="reset-show-password" onclick="togglePassword('reset-new-password'); togglePassword('reset-confirm-password')"> Show Password
    </div>
    <button onclick="resetPassword()">Reset Password</button>
    <div class="switch-link">
      Remembered? <a href="/">Back to login</a>
    </div>
  </div>

  <script>
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      field.type = field.type === 'password' ? 'text' : 'password';
    }

    async function resetPassword() {
      const username = document.getElementById('reset-username').value;
      const newPassword = document.getElementById('reset-new-password').value;
      const confirmPassword = document.getElementById('reset-confirm-password').value;

      if (newPassword !== confirmPassword) {
        alert('New passwords do not match!');
        return;
      }

      const res = await fetch('/reset_password', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, new_password: newPassword })
      });

      const data = await res.json();
      if (res.ok) {
        alert('Password reset successful! Please log in.');
        window.location.href = '/';
      } else {
        alert(`Password reset failed: ${data.error}`);
      }
    }
  </script>
</body>
</html>
